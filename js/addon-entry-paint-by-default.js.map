{"version":3,"file":"js/addon-entry-paint-by-default.js","sources":["webpack://GUI/./src/addons/addons/paint-by-default/_runtime_entry.js","webpack://GUI/./src/addons/addons/paint-by-default/userscript.js"],"sourcesContent":["/* generated by pull.js */\nimport _js from \"./userscript.js\";\nexport const resources = {\n  \"userscript.js\": _js,\n};\n","export default async function ({ addon, console }) {\n  const spriteMeta = Object.assign(Object.create(null), {\n    upload: {\n      index: 0,\n      tooltip: \"gui.spriteSelector.addSpriteFromFile\",\n    },\n    surprise: {\n      index: 1,\n      tooltip: \"gui.spriteSelector.addSpriteFromSurprise\",\n    },\n    paint: {\n      index: 2,\n      tooltip: \"gui.spriteSelector.addSpriteFromPaint\",\n    },\n    library: {\n      index: 3,\n      tooltip: \"gui.spriteSelector.addSpriteFromLibrary\",\n    },\n  });\n  const backdropMeta = Object.assign(Object.create(null), {\n    upload: {\n      index: 0,\n      tooltip: \"gui.stageSelector.addBackdropFromFile\",\n    },\n    surprise: {\n      index: 1,\n      tooltip: \"gui.stageSelector.addBackdropFromSurprise\",\n    },\n    paint: {\n      index: 2,\n      tooltip: \"gui.stageSelector.addBackdropFromPaint\",\n    },\n    library: {\n      index: 3,\n      tooltip: \"gui.spriteSelector.addBackdropFromLibrary\",\n    },\n  });\n  const costumeMeta = Object.assign(Object.create(null), {\n    upload: {\n      index: 0,\n      tooltip: \"gui.costumeTab.addFileCostume\",\n    },\n    surprise: {\n      index: 1,\n      tooltip: \"gui.costumeTab.addSurpriseCostume\",\n    },\n    paint: {\n      index: 2,\n      tooltip: \"gui.costumeTab.addBlankCostume\",\n    },\n    library: {\n      index: 3,\n      tooltip: \"gui.costumeTab.addCostumeFromLibrary\",\n    },\n  });\n  const soundMeta = Object.assign(Object.create(null), {\n    upload: {\n      index: 0,\n      tooltip: \"gui.soundTab.fileUploadSound\",\n    },\n    surprise: {\n      index: 1,\n      tooltip: \"gui.soundTab.surpriseSound\",\n    },\n    record: {\n      index: 2,\n      tooltip: \"gui.soundTab.recordSound\",\n    },\n    library: {\n      index: 3,\n      tooltip: \"gui.soundTab.addSoundFromLibrary\",\n    },\n  });\n  const getSetting = (id) => {\n    if (addon.self.disabled) {\n      return \"library\";\n    }\n    return addon.settings.get(id);\n  };\n  const getButtonToClick = (mainButton) => {\n    const assetPanelWrapper = mainButton.closest(\"[class*=asset-panel_wrapper_]\");\n    if (assetPanelWrapper) {\n      if (addon.tab.redux.state.scratchGui.editorTab.activeTabIndex === 2) {\n        return soundMeta[getSetting(\"sound\")] || soundMeta.library;\n      } else {\n        return costumeMeta[getSetting(\"costume\")] || costumeMeta.library;\n      }\n    } else if (mainButton.closest('[class*=\"target-pane_stage-selector-wrapper\"]')) {\n      return backdropMeta[getSetting(\"backdrop\")] || backdropMeta.library;\n    } else {\n      return spriteMeta[getSetting(\"sprite\")] || spriteMeta.library;\n    }\n  };\n  document.body.addEventListener(\n    \"click\",\n    (e) => {\n      if (addon.self.disabled) {\n        return;\n      }\n      const mainButton = e.target.closest('[class*=\"action-menu_main-button_\"]');\n      if (!mainButton) {\n        return;\n      }\n      e.stopPropagation();\n      const moreButtonsElement = mainButton.parentElement.querySelector('[class*=\"action-menu_more-buttons_\"]');\n      const moreButtons = moreButtonsElement.children;\n      const { index } = getButtonToClick(mainButton);\n      // better-img-uploads can add a button at the start, so search \"from the end\" for compatibility\n      const buttonToClick = moreButtons[moreButtons.length - (4 - index)];\n      const elementToClick = buttonToClick.querySelector(\"button\");\n      elementToClick.click();\n    },\n    {\n      bubble: true,\n    }\n  );\n  document.body.addEventListener(\n    \"mouseover\",\n    (e) => {\n      const mainButton = e.target.closest('[class*=\"action-menu_main-button_\"]');\n      if (!mainButton) {\n        return;\n      }\n      const tooltipElement = mainButton.parentElement.querySelector(\".__react_component_tooltip\");\n      const { tooltip } = getButtonToClick(mainButton);\n      const translatedTooltip = addon.tab.redux.state.locales.messages[tooltip];\n      const needToFixTooltipText = translatedTooltip && tooltipElement.textContent !== translatedTooltip;\n      if (needToFixTooltipText) {\n        tooltipElement.textContent = translatedTooltip;\n        setTimeout(() => {\n          tooltipElement.textContent = translatedTooltip;\n          mainButton.dispatchEvent(new Event(\"mouseenter\"));\n        });\n      }\n    },\n    {\n      bubble: true,\n    }\n  );\n}\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AACA;AAiBA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAIA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAIA;;;;A","sourceRoot":""}