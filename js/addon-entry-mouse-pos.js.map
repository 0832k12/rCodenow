{"version":3,"file":"js/addon-entry-mouse-pos.js","sources":["webpack://GUI/./src/addons/addons/mouse-pos/style.css","webpack://GUI/./src/addons/addons/mouse-pos/_runtime_entry.js","webpack://GUI/./src/addons/addons/mouse-pos/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".pos-container-container {\\n  display: flex;\\n  align-items: center;\\n  padding: 0.25rem;\\n  user-select: none;\\n  width: 45px;\\n  justify-content: center;\\n}\\n\\n.pos-container {\\n  font-size: 0.6rem;\\n  font-weight: bold;\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n  color: #5cb1d6;\\n  white-space: nowrap;\\n}\\n\\n/* Use pseudo elements to avoid firing mutation observers by just moving the cursor */\\n.pos-container > span::after {\\n  content: attr(data-content);\\n}\\n\\n.sa-mouse-pos-small .pos-container-container {\\n  display: none !important;\\n}\\n\", \"\"]);\n\n// exports\n","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./style.css\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"style.css\": _css,\n};\n","export default async function ({ addon, console }) {\n  var posContainerContainer = document.createElement(\"div\");\n  addon.tab.displayNoneWhileDisabled(posContainerContainer, { display: \"flex\" });\n\n  var posContainer = document.createElement(\"div\");\n  var pos = document.createElement(\"span\");\n\n  posContainerContainer.className = \"pos-container-container\";\n  posContainer.className = \"pos-container\";\n\n  posContainerContainer.appendChild(posContainer);\n  posContainer.appendChild(pos);\n\n  const vm = addon.tab.traps.vm;\n\n  vm.runtime.ioDevices.mouse.__scratchX = vm.runtime.ioDevices.mouse._scratchX;\n  vm.runtime.ioDevices.mouse.__scratchY = vm.runtime.ioDevices.mouse._scratchY;\n\n  var x = vm.runtime.ioDevices.mouse.__scratchX ? vm.runtime.ioDevices.mouse.__scratchX : 0;\n  var y = vm.runtime.ioDevices.mouse.__scratchY ? vm.runtime.ioDevices.mouse.__scratchY : 0;\n\n  const showUpdatedValue = () => pos.setAttribute(\"data-content\", `${Math.round(x)}, ${Math.round(y)}`);\n\n  Object.defineProperty(vm.runtime.ioDevices.mouse, \"_scratchX\", {\n    get: function () {\n      return this.__scratchX;\n    },\n    set: function (setx) {\n      x = setx;\n      showUpdatedValue();\n      this.__scratchX = setx;\n    },\n  });\n\n  Object.defineProperty(vm.runtime.ioDevices.mouse, \"_scratchY\", {\n    get: function () {\n      return this.__scratchY;\n    },\n    set: function (sety) {\n      y = sety;\n      showUpdatedValue();\n      this.__scratchY = sety;\n    },\n  });\n\n  if (addon.tab.redux.state && addon.tab.redux.state.scratchGui.stageSize.stageSize === \"small\") {\n    document.body.classList.add(\"sa-mouse-pos-small\");\n  }\n  document.addEventListener(\n    \"click\",\n    (e) => {\n      if (e.target.closest(\"[class*='stage-header_stage-button-first']\")) {\n        document.body.classList.add(\"sa-mouse-pos-small\");\n      } else if (e.target.closest(\"[class*='stage-header_stage-button-last']\")) {\n        document.body.classList.remove(\"sa-mouse-pos-small\");\n      }\n    },\n    { capture: true }\n  );\n\n  while (true) {\n    await addon.tab.waitForElement('[class*=\"controls_controls-container\"]', {\n      markAsSeen: true,\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\n    });\n\n    if (addon.tab.editorMode === \"editor\") {\n      addon.tab.appendToSharedSpace({ space: \"afterStopButton\", element: posContainerContainer, order: 1 });\n    }\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}