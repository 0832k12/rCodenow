{"version":3,"file":"js/addon-entry-search-sprites.js","sources":["webpack://GUI/./src/addons/addons/search-sprites/search-bar.css","webpack://GUI/./src/addons/addons/search-sprites/_runtime_entry.js","webpack://GUI/./src/addons/addons/search-sprites/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-search-sprites-container {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n}\\n\\ninput.sa-search-sprites-box {\\n  width: 100%;\\n  box-sizing: border-box;\\n  background-color: transparent;\\n  border: 0px;\\n  border-bottom: 1px solid hsla(0, 0%, 1%, 0.15);\\n  outline: none;\\n  padding: 5px 20px 5px 10px;\\n}\\n[theme=\\\"dark\\\"] input.sa-search-sprites-box {\\n  border-color: var(--ui-black-transparent);\\n}\\n\\n.sa-search-sprites-reset {\\n  display: none;\\n  margin: 0;\\n  padding: 0;\\n  background: none;\\n  border: none;\\n  outline: none;\\n  cursor: pointer;\\n  position: absolute;\\n  right: 0;\\n  padding-right: 5px;\\n  font-size: 25px;\\n}\\n\\n.sa-search-sprites-box:not(:placeholder-shown) ~ .sa-search-sprites-reset {\\n  display: block;\\n}\\n\", \"\"]);\n\n// exports\n","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./search-bar.css\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"search-bar.css\": _css,\n};\n","export default async function ({ addon, console, msg }) {\n  let spritesContainer;\n  let spriteSelectorContainer;\n\n  const container = document.createElement(\"div\");\n  container.className = \"sa-search-sprites-container\";\n  addon.tab.displayNoneWhileDisabled(container, {\n    display: \"flex\",\n  });\n\n  const searchBox = document.createElement(\"input\");\n  searchBox.className = \"sa-search-sprites-box\";\n  searchBox.placeholder = msg(\"placeholder\");\n  searchBox.autocomplete = \"off\";\n  // search might make more sense, but browsers treat them special in ways that this addon does not handle,\n  // so just leave it as a text input. Also note that Scratch uses type=text for its own search inputs in\n  // the libraries, so this fits right in.\n  searchBox.type = \"text\";\n\n  const search = (query) => {\n    if (!spritesContainer) return;\n\n    query = query.toLowerCase();\n    const containsQuery = (str) => str.toLowerCase().includes(query);\n\n    for (const sprite of spritesContainer.children) {\n      const visible =\n        !query ||\n        containsQuery(sprite.children[0].children[1].innerText) ||\n        (containsQuery(sprite.children[0].children[2].children[0].innerText) &&\n          sprite.children[0].classList.contains(\"sa-folders-folder\"));\n      sprite.style.display = visible ? \"\" : \"none\";\n    }\n  };\n\n  searchBox.addEventListener(\"input\", (e) => {\n    search(e.target.value);\n  });\n\n  const reset = () => {\n    search(\"\");\n    searchBox.value = \"\";\n  };\n\n  const resetButton = document.createElement(\"button\");\n  resetButton.className = \"sa-search-sprites-reset\";\n  resetButton.addEventListener(\"click\", reset);\n  resetButton.textContent = \"Ã—\";\n  addon.self.addEventListener(\"disabled\", reset);\n\n  container.appendChild(searchBox);\n  container.appendChild(resetButton);\n\n  while (true) {\n    await addon.tab.waitForElement(\"div[class^='sprite-selector_items-wrapper']\", {\n      markAsSeen: true,\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\n      reduxCondition: (state) => !state.scratchGui.mode.isPlayerOnly,\n    });\n\n    spritesContainer = document.querySelector('[class^=\"sprite-selector_items-wrapper\"]');\n    spriteSelectorContainer = document.querySelector('[class^=\"sprite-selector_scroll-wrapper\"]');\n    spriteSelectorContainer.insertBefore(container, spritesContainer);\n    reset(); // Clear search box after going outside then inside\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}