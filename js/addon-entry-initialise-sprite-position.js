(window["webpackJsonpGUI"] = window["webpackJsonpGUI"] || []).push([["addon-entry-initialise-sprite-position"],{

/***/ "./src/addons/addons/initialise-sprite-position/_runtime_entry.js":
/*!************************************************************************!*\
  !*** ./src/addons/addons/initialise-sprite-position/_runtime_entry.js ***!
  \************************************************************************/
/*! exports provided: resources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resources", function() { return resources; });
/* harmony import */ var _userscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userscript.js */ "./src/addons/addons/initialise-sprite-position/userscript.js");
/* generated by pull.js */

const resources = {
  "userscript.js": _userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"]
};

/***/ }),

/***/ "./src/addons/addons/initialise-sprite-position/userscript.js":
/*!********************************************************************!*\
  !*** ./src/addons/addons/initialise-sprite-position/userscript.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (async function ({
  addon
}) {
  const vm = addon.tab.traps.vm;
  const oldAddSprite = vm.constructor.prototype.addSprite;

  vm.constructor.prototype.addSprite = function (input) {
    var _spriteObj$costumes, _spriteObj$costumes$;

    let spriteObj,
        stringify = true;
    if (typeof input === "object") [spriteObj, stringify] = [input, false];else spriteObj = JSON.parse(input);
    const isEmpty = ((_spriteObj$costumes = spriteObj.costumes) === null || _spriteObj$costumes === void 0 ? void 0 : (_spriteObj$costumes$ = _spriteObj$costumes[0]) === null || _spriteObj$costumes$ === void 0 ? void 0 : _spriteObj$costumes$.baseLayerMD5) === "cd21514d0531fdffb22204e0ec5ed84a.svg";

    if (!addon.self.disabled && (isEmpty || !spriteObj.tags || !addon.settings.get("library"))) {
      if (spriteObj.scratchX) {
        spriteObj.scratchX = addon.settings.get("x");
        spriteObj.scratchY = addon.settings.get("y");
      }

      if (spriteObj.x) {
        spriteObj.x = addon.settings.get("x");
        spriteObj.y = addon.settings.get("y");
      }
    }

    return oldAddSprite.call(this, stringify ? JSON.stringify(spriteObj) : spriteObj);
  };

  const registerDupPrototype = () => {
    const targetPrototype = vm.runtime.getTargetForStage().constructor.prototype;
    const oldDuplicate = targetPrototype.duplicate;

    targetPrototype.duplicate = function () {
      return oldDuplicate.call(this).then(newSprite => {
        if (!addon.self.disabled) {
          switch (addon.settings.get("duplicate")) {
            case "custom":
              newSprite.setXY(addon.settings.get("x"), addon.settings.get("y"));
              break;

            case "keep":
              newSprite.setXY(this.x, this.y);
          }
        }

        return newSprite;
      });
    };
  };

  if (vm.runtime.getTargetForStage()) {
    registerDupPrototype();
  } else {
    vm.runtime.once("PROJECT_LOADED", registerDupPrototype);
  }
});

/***/ })

}]);
//# sourceMappingURL=addon-entry-initialise-sprite-position.js.map