{"version":3,"file":"js/addon-entry-hide-stage.js","sources":["webpack://GUI/./src/addons/addons/hide-stage/style.css","webpack://GUI/./src/addons/addons/hide-stage/icon.svg","webpack://GUI/./src/addons/addons/hide-stage/_runtime_entry.js","webpack://GUI/./src/addons/addons/hide-stage/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-stage-button-middle > [class*=\\\"stage-header_stage-button_\\\"] {\\n  border-radius: 0;\\n}\\n\\n[dir=\\\"ltr\\\"] .sa-stage-button-middle > [class*=\\\"stage-header_stage-button_\\\"] {\\n  border-left: none;\\n}\\n\\n[dir=\\\"rtl\\\"] .sa-stage-button-middle > [class*=\\\"stage-header_stage-button_\\\"] {\\n  border-right: none;\\n}\\n\\n.sa-stage-hidden [class*=\\\"blocks_blocks_\\\"] .injectionDiv,\\n.sa-stage-hidden [class*=\\\"asset-panel_wrapper_\\\"],\\n.sa-stage-hidden [class*=\\\"backpack_backpack-header_\\\"] {\\n  border-radius: 0;\\n}\\n\\n/* [class*=\\\"gui_flex-wrapper_\\\"] is for specificity over hide-flyout */\\n.sa-stage-hidden [class*=\\\"gui_flex-wrapper_\\\"] [class*=\\\"gui_stage-and-target-wrapper_\\\"],\\n.sa-stage-hidden [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"]),\\n.sa-stage-hidden [class*=\\\"gui_target-wrapper_\\\"] {\\n  padding: 0;\\n}\\n\\n.sa-stage-hidden\\n  [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"])\\n  [class*=\\\"controls_controls-container_\\\"],\\n.sa-stage-hidden [class*=\\\"gui_target-wrapper_\\\"] {\\n  display: none;\\n}\\n.sa-stage-hidden\\n  [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"])\\n  [class*=\\\"stage-wrapper_stage-canvas-wrapper_\\\"] {\\n  /* can't use display: none because that causes the canvas's clientWidth/Height to become 0 which causes crashes */\\n  visibility: hidden;\\n  position: absolute;\\n  z-index: -9999;\\n  /* move the stage to avoid a horizontal scroll bar */\\n  right: 0;\\n  /* and move it up so that the mouse can't hover over the stage while its hidden */\\n  bottom: 100%;\\n}\\n[dir=\\\"rtl\\\"]\\n  .sa-stage-hidden\\n  [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"])\\n  [class*=\\\"stage-wrapper_stage-canvas-wrapper_\\\"] {\\n  right: initial;\\n  left: 0;\\n}\\n\\n.sa-stage-hidden [class*=\\\"stage-header_stage-size-row\\\"] {\\n  position: absolute;\\n  top: 0;\\n  right: 0.5rem;\\n  height: 2.75rem;\\n  align-items: center;\\n}\\n\\n[dir=\\\"rtl\\\"] .sa-stage-hidden [class*=\\\"stage-header_stage-size-row\\\"] {\\n  right: auto;\\n  left: 0.5rem;\\n}\\n\\n.sa-stage-hidden\\n  /* specificity --> */ [class*=\\\"stage-header_stage-size-row_\\\"] /* <-- specificity */\\n  [class*=\\\"stage-header_stage-button_\\\"]:not(.sa-hide-stage-button)\\n  [class*=\\\"stage-header_stage-button-icon_\\\"] {\\n  /* makes small and large stage buttons appear unselected */\\n  filter: var(--editorDarkMode-accent-desaturateFilter, saturate(0));\\n}\\n/* from stage-header.css */\\n[theme=\\\"dark\\\"]\\n  .sa-stage-hidden\\n  /* specificity --> */ [class*=\\\"stage-header_stage-size-row_\\\"] /* <-- specificity */\\n  [class*=\\\"stage-header_stage-button_\\\"]:not(.sa-hide-stage-button)\\n  [class*=\\\"stage-header_stage-button-icon_\\\"] {\\n  filter: brightness(0) invert(1);\\n}\\n\\n.sa-stage-hidden-outer .scratchEyedropper {\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjRkY0QzRDIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTQgNGExIDEgMCAwIDAtMSAxdjEwYTEgMSAwIDAgMCAxIDFoMTJhMSAxIDAgMCAwIDEtMVY1LjVoLTRWNFoiLz48cGF0aCBkPSJNMTMgNGgzYTEgMSAwIDAgMSAxIDF2LjVoLTR6IiBmaWxsPSIjRkY0QzRDIi8+PC9nPjwvc3ZnPgo=\"","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./style.css\";\nimport _asset from \"!url-loader!./icon.svg\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"style.css\": _css,\n  \"icon.svg\": _asset,\n};\n","export default async function ({ addon, console, msg }) {\n  let stageHidden = false;\n  let bodyWrapper;\n  let smallStageButton;\n  let largeStageButton;\n  let hideStageButton;\n\n  function hideStage() {\n    stageHidden = true;\n    if (!bodyWrapper) return;\n    document.body.classList.add(\"sa-stage-hidden-outer\");\n    // Inner class is applied to body wrapper so that it won't affect the project page.\n    bodyWrapper.classList.add(\"sa-stage-hidden\");\n    hideStageButton.classList.remove(addon.tab.scratchClass(\"stage-header_stage-button-toggled-off\"));\n    window.dispatchEvent(new Event(\"resize\")); // resizes the code area and paint editor canvas\n  }\n\n  function unhideStage(e) {\n    stageHidden = false;\n    if (!bodyWrapper) return;\n    document.body.classList.remove(\"sa-stage-hidden-outer\");\n    bodyWrapper.classList.remove(\"sa-stage-hidden\");\n    hideStageButton.classList.add(addon.tab.scratchClass(\"stage-header_stage-button-toggled-off\"));\n    window.dispatchEvent(new Event(\"resize\")); // resizes the code area and paint editor canvas\n  }\n\n  addon.self.addEventListener(\"disabled\", () => unhideStage());\n\n  while (true) {\n    const stageControls = await addon.tab.waitForElement(\"[class*='stage-header_stage-size-toggle-group_']\", {\n      markAsSeen: true,\n      reduxCondition: (state) => !state.scratchGui.mode.isPlayerOnly,\n    });\n    bodyWrapper = document.querySelector(\"[class*='gui_body-wrapper_']\");\n    smallStageButton = stageControls.firstChild;\n    smallStageButton.classList.add(\"sa-stage-button-middle\");\n    largeStageButton = stageControls.lastChild;\n    hideStageButton = Object.assign(document.createElement(\"div\"), {\n      role: \"button\",\n      className: addon.tab.scratchClass(\n        \"button_outlined-button\",\n        \"stage-header_stage-button\",\n        \"stage-header_stage-button-first\",\n        { others: \"sa-hide-stage-button\" }\n      ),\n    });\n    addon.tab.displayNoneWhileDisabled(hideStageButton);\n    stageControls.insertBefore(hideStageButton, smallStageButton);\n    hideStageButton.appendChild(\n      Object.assign(document.createElement(\"img\"), {\n        className: addon.tab.scratchClass(\"stage-header_stage-button-icon\"),\n        src: addon.self.getResource(\"/icon.svg\") /* rewritten by pull.js */,\n        alt: msg(\"hide-stage\"),\n        draggable: false,\n      })\n    );\n    if (stageHidden) hideStage();\n    else unhideStage();\n    hideStageButton.addEventListener(\"click\", hideStage);\n    smallStageButton.addEventListener(\"click\", unhideStage);\n    largeStageButton.addEventListener(\"click\", unhideStage);\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAAA;AANA;AASA;AACA;AACA;AAEA;AACA;AAAA;AAFA;AAGA;AACA;AAJA;AAOA;AAEA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}